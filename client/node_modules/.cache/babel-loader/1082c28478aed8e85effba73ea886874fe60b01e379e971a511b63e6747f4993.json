{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC_Ninh\\\\Downloads\\\\web_b\\xE1n h\\xE0ng\\\\ecommerce\\\\client\\\\src\\\\pages\\\\MyOrders.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../state/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MyOrders() {\n  _s();\n  const {\n    token\n  } = useAuth();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    async function fetchOrders() {\n      setLoading(true);\n      setError('');\n      try {\n        const res = await fetch('/api/orders/mine', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!res.ok) throw new Error('Không thể tải đơn hàng');\n        const data = await res.json();\n        setOrders(data);\n      } catch (e) {\n        setError(e.message);\n      } finally {\n        setLoading(false);\n      }\n    }\n    if (token) fetchOrders();\n  }, [token]);\n  if (!token) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Vui l\\xF2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 xem \\u0111\\u01A1n h\\xE0ng c\\u1EE7a b\\u1EA1n.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 22\n  }, this);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\u0110ang t\\u1EA3i...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-red-600\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"\\u0110\\u01A1n c\\u1EE7a t\\xF4i\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Ch\\u01B0a c\\xF3 \\u0111\\u01A1n h\\xE0ng n\\xE0o.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: orders.map(o => {\n        var _o$items;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white border rounded p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold\",\n                children: [\"M\\xE3 \\u0111\\u01A1n: \", o._id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 45,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Tr\\u1EA1ng th\\xE1i: \", o.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 46,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"T\\u1ED5ng ti\\u1EC1n: \", new Intl.NumberFormat('vi-VN').format(o.totalPrice), \" \\u0111\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: new Date(o.createdAt).toLocaleString('vi-VN')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 50,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-sm\",\n            children: [\"S\\u1EA3n ph\\u1EA9m:\", /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc ml-5\",\n              children: (_o$items = o.items) === null || _o$items === void 0 ? void 0 : _o$items.map(it => {\n                var _it$product, _it$product2;\n                return /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [((_it$product2 = it.product) === null || _it$product2 === void 0 ? void 0 : _it$product2.name) || it.name, \" x \", it.quantity, \" \\u2014 \", new Intl.NumberFormat('vi-VN').format(it.price), \" \\u0111\"]\n                }, ((_it$product = it.product) === null || _it$product === void 0 ? void 0 : _it$product._id) || it._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 57,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 15\n          }, this)]\n        }, o._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n}\n_s(MyOrders, \"coxNEGvqABqS+yM8DuovMfg9NBo=\", false, function () {\n  return [useAuth];\n});\n_c = MyOrders;\nvar _c;\n$RefreshReg$(_c, \"MyOrders\");","map":{"version":3,"names":["React","useEffect","useState","useAuth","jsxDEV","_jsxDEV","MyOrders","_s","token","orders","setOrders","loading","setLoading","error","setError","fetchOrders","res","fetch","headers","Authorization","ok","Error","data","json","e","message","children","fileName","_jsxFileName","lineNumber","columnNumber","className","length","map","o","_o$items","_id","status","Intl","NumberFormat","format","totalPrice","Date","createdAt","toLocaleString","items","it","_it$product","_it$product2","product","name","quantity","price","_c","$RefreshReg$"],"sources":["C:/Users/PC_Ninh/Downloads/web_bán hàng/ecommerce/client/src/pages/MyOrders.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useAuth } from '../state/AuthContext';\n\nexport default function MyOrders() {\n  const { token } = useAuth();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    async function fetchOrders() {\n      setLoading(true);\n      setError('');\n      try {\n        const res = await fetch('/api/orders/mine', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (!res.ok) throw new Error('Không thể tải đơn hàng');\n        const data = await res.json();\n        setOrders(data);\n      } catch (e) {\n        setError(e.message);\n      } finally {\n        setLoading(false);\n      }\n    }\n    if (token) fetchOrders();\n  }, [token]);\n\n  if (!token) return <p>Vui lòng đăng nhập để xem đơn hàng của bạn.</p>;\n  if (loading) return <p>Đang tải...</p>;\n  if (error) return <p className=\"text-red-600\">{error}</p>;\n\n  return (\n    <div>\n      <h1 className=\"text-xl font-semibold mb-4\">Đơn của tôi</h1>\n      {orders.length === 0 ? (\n        <p>Chưa có đơn hàng nào.</p>\n      ) : (\n        <div className=\"space-y-4\">\n          {orders.map((o) => (\n            <div key={o._id} className=\"bg-white border rounded p-3\">\n              <div className=\"flex justify-between\">\n                <div>\n                  <p className=\"font-semibold\">Mã đơn: {o._id}</p>\n                  <p>Trạng thái: {o.status}</p>\n                  <p>Tổng tiền: {new Intl.NumberFormat('vi-VN').format(o.totalPrice)} đ</p>\n                </div>\n                <div className=\"text-sm text-gray-600\">\n                  <p>{new Date(o.createdAt).toLocaleString('vi-VN')}</p>\n                </div>\n              </div>\n              <div className=\"mt-2 text-sm\">\n                Sản phẩm:\n                <ul className=\"list-disc ml-5\">\n                  {o.items?.map((it) => (\n                    <li key={it.product?._id || it._id}>\n                      {it.product?.name || it.name} x {it.quantity} — {new Intl.NumberFormat('vi-VN').format(it.price)} đ\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}