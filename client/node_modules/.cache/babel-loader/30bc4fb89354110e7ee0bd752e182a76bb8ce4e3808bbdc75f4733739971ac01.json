{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC_Ninh\\\\Downloads\\\\web_b\\xE1n h\\xE0ng\\\\ecommerce\\\\client\\\\src\\\\state\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useMemo, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartCtx = /*#__PURE__*/createContext();\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [items, setItems] = useState(() => {\n    const raw = localStorage.getItem('cart');\n    return raw ? JSON.parse(raw) : [];\n  });\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(items));\n  }, [items]);\n  const add = (product, qty = 1) => {\n    setItems(prev => {\n      const found = prev.find(p => p._id === product._id);\n      if (found) return prev.map(p => p._id === product._id ? {\n        ...p,\n        quantity: p.quantity + qty\n      } : p);\n      return [...prev, {\n        ...product,\n        quantity: qty\n      }];\n    });\n  };\n  const remove = id => setItems(prev => prev.filter(p => p._id !== id));\n  const update = (id, qty) => setItems(prev => prev.map(p => p._id === id ? {\n    ...p,\n    quantity: qty\n  } : p));\n  const clear = () => setItems([]);\n  const cartCount = useMemo(() => items.reduce((s, it) => s + it.quantity, 0), [items]);\n  const total = useMemo(() => items.reduce((s, it) => s + it.quantity * (it.price || 0), 0), [items]);\n  return /*#__PURE__*/_jsxDEV(CartCtx.Provider, {\n    value: {\n      items,\n      add,\n      remove,\n      update,\n      clear,\n      cartCount,\n      total\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}\n_s(CartProvider, \"+Q4mKyyYqfoNMfKZBbXqUIaaMq8=\");\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  return useContext(CartCtx);\n};\n_s2(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useState","jsxDEV","_jsxDEV","CartCtx","CartProvider","children","_s","items","setItems","raw","localStorage","getItem","JSON","parse","setItem","stringify","add","product","qty","prev","found","find","p","_id","map","quantity","remove","id","filter","update","clear","cartCount","reduce","s","it","total","price","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","$RefreshReg$"],"sources":["C:/Users/PC_Ninh/Downloads/web_bán hàng/ecommerce/client/src/state/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';\n\nconst CartCtx = createContext();\n\nexport function CartProvider({ children }) {\n  const [items, setItems] = useState(() => {\n    const raw = localStorage.getItem('cart');\n    return raw ? JSON.parse(raw) : [];\n  });\n\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(items));\n  }, [items]);\n\n  const add = (product, qty = 1) => {\n    setItems((prev) => {\n      const found = prev.find((p) => p._id === product._id);\n      if (found) return prev.map((p) => (p._id === product._id ? { ...p, quantity: p.quantity + qty } : p));\n      return [...prev, { ...product, quantity: qty }];\n    });\n  };\n  const remove = (id) => setItems((prev) => prev.filter((p) => p._id !== id));\n  const update = (id, qty) => setItems((prev) => prev.map((p) => (p._id === id ? { ...p, quantity: qty } : p)));\n  const clear = () => setItems([]);\n\n  const cartCount = useMemo(() => items.reduce((s, it) => s + it.quantity, 0), [items]);\n  const total = useMemo(() => items.reduce((s, it) => s + it.quantity * (it.price || 0), 0), [items]);\n\n  return (\n    <CartCtx.Provider value={{ items, add, remove, update, clear, cartCount, total }}>\n      {children}\n    </CartCtx.Provider>\n  );\n}\n\nexport const useCart = () => useContext(CartCtx);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}